
@layer base {
  @media (max-width: 768px) {
    html, body {
      height: 100%;
      width: 100%;
      overflow-x: hidden;
      overflow-y: hidden; /* Prevent body scroll on mobile */
      position: relative;
    }
    
    /* Remove scroll from main app container */
    #root {
      height: 100vh;
      overflow: hidden;
    }
    
    /* Estilos específicos para o modo mobile quando o formulário está aberto */
    body.form-overlay-open {
      overflow: hidden;
      position: fixed;
      width: 100%;
      height: 100%;
    }
  }

  /* Enhanced mobile spacing */
  @media (max-width: 768px) {
    section {
      margin-bottom: 0.5rem;
    }
  }

  /* Performance optimizations for mobile */
  @media (max-width: 768px) and (prefers-reduced-motion: reduce) {
    .animate-float,
    .animate-pulse-slow,
    .animate-fade-up {
      animation: none !important;
    }
  }
}

@layer utilities {
  /* Safe area utilities for mobile devices with notch/dynamic island */
  .safe-area-pb {
    padding-bottom: max(env(safe-area-inset-bottom), 5rem);
  }

  .safe-area-pl {
    padding-left: env(safe-area-inset-left);
  }

  .safe-area-pr {
    padding-right: env(safe-area-inset-right);
  }

  .safe-area-pt {
    padding-top: max(env(safe-area-inset-top), 1rem);
  }

  .safe-area-px {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* Mobile-first responsive containers - minimal padding */
  .mobile-container {
    @apply px-1 w-full mx-auto;
  }

  .mobile-container-tight {
    @apply px-1 w-full mx-auto;
  }
  
  .mobile-container-full {
    @apply px-0 w-full;
  }

  .mobile-container-minimal {
    @apply px-1 w-full mx-auto;
  }
  
  /* Mobile optimized spacing - more compact */
  .mobile-spacing {
    @apply space-y-2;
  }

  .mobile-spacing-tight {
    @apply space-y-1;
  }

  .mobile-spacing-loose {
    @apply space-y-3;
  }

  /* Touch-friendly interactive elements */
  .touch-target {
    @apply min-h-[44px] min-w-[44px] flex items-center justify-center;
  }

  .touch-target-large {
    @apply min-h-[56px] min-w-[56px] flex items-center justify-center;
  }

  /* Mobile card layouts - edge to edge */
  .mobile-card {
    @apply rounded-lg p-3 bg-background/40 backdrop-blur-sm border border-gold/10 mx-1;
  }

  .mobile-card-compact {
    @apply rounded-lg p-2 bg-background/40 backdrop-blur-sm border border-gold/10 mx-1;
  }

  /* Mobile grid systems - minimal gaps */
  .mobile-grid-2 {
    @apply grid grid-cols-2 gap-2;
  }

  .mobile-grid-3 {
    @apply grid grid-cols-3 gap-1;
  }

  .mobile-grid-auto {
    @apply grid grid-cols-[repeat(auto-fit,minmax(140px,1fr))] gap-2;
  }

  /* Mobile typography optimizations */
  .mobile-heading {
    @apply text-lg font-semibold leading-tight;
  }

  .mobile-subheading {
    @apply text-base font-medium leading-snug;
  }

  .mobile-body {
    @apply text-sm leading-relaxed;
  }

  .mobile-caption {
    @apply text-xs leading-normal;
  }

  /* Mobile interaction states */
  .mobile-touch-feedback {
    @apply active:scale-95 transition-transform duration-100;
  }

  .mobile-tap-highlight {
    -webkit-tap-highlight-color: rgba(255, 215, 0, 0.1);
  }

  /* Mobile animations */
  @keyframes slide-up-mobile {
    from {
      transform: translateY(100vh);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  .animate-slide-up-mobile {
    animation: slide-up-mobile 0.3s ease-out forwards;
  }
  
  @keyframes fade-in-mobile {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-fade-in-mobile {
    animation: fade-in-mobile 0.4s ease-out forwards;
  }

  /* Mobile overlay and modal styles */
  .mobile-overlay {
    @apply fixed inset-0 bg-black/50 backdrop-blur-sm z-50;
  }

  .mobile-modal {
    @apply fixed inset-x-0 bottom-0 z-50 bg-background rounded-t-xl border-t border-gold/20;
    max-height: 90vh;
  }

  .mobile-drawer {
    @apply transform transition-transform duration-300 ease-out;
  }

  .mobile-drawer-closed {
    @apply translate-y-full;
  }

  .mobile-drawer-open {
    @apply translate-y-0;
  }

  /* Mobile content spacing - remove conflicting bottom padding */
  .mobile-content-with-nav {
    @apply overflow-visible;
  }

  /* Mobile header heights */
  .mobile-header-height {
    height: 56px;
  }

  .mobile-header-safe-height {
    height: calc(56px + env(safe-area-inset-top));
  }

  /* Mobile status bar consideration */
  .mobile-status-safe {
    padding-top: env(safe-area-inset-top);
  }

  /* Mobile gesture areas */
  .mobile-swipe-area {
    @apply relative overflow-hidden;
  }

  /* Pull to refresh styles */
  .mobile-pull-refresh {
    @apply transition-transform duration-200 ease-out;
  }

  .mobile-pull-refresh-active {
    @apply transform translate-y-16;
  }

  /* Single scroll container optimization */
  .mobile-single-scroll {
    @apply overflow-y-auto overflow-x-hidden;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* Full width mobile content - no side margins */
  .mobile-full-width {
    @apply w-full px-0;
  }

  /* Edge to edge content */
  .mobile-edge-to-edge {
    @apply mx-0 px-0 w-full;
  }
}

/* Mobile-specific component overrides */
@media (max-width: 768px) {
  /* Toast positioning for mobile */
  [data-sonner-toaster][data-theme="dark"] {
    --normal-bg: rgba(0, 0, 0, 0.9);
    --normal-border: rgba(255, 215, 0, 0.2);
    --normal-text: rgba(255, 255, 255, 0.95);
  }
  
  /* Bottom sheet styles */
  .vaul-drawer {
    position: fixed;
    inset: 0;
    z-index: 50;
  }

  .mobile-bottom-sheet {
    border-radius: 12px 12px 0 0 !important;
    max-height: 90vh !important;
  }

  /* Form input optimizations */
  input[type="tel"],
  input[type="email"],
  input[type="number"] {
    font-size: 16px; /* Prevents zoom on iOS */
  }

  /* Improved tap targets */
  button,
  [role="button"],
  input[type="submit"],
  input[type="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Prevent content containers from creating additional scroll */
  .mobile-no-scroll {
    overflow: visible;
  }

  /* Override default card margins for full width */
  .mobile-card,
  .mobile-card-compact {
    margin-left: 0;
    margin-right: 0;
  }
}

/* Landscape mode optimizations */
@media (max-width: 768px) and (orientation: landscape) {
  .mobile-landscape-compact {
    @apply py-1;
  }
  
  .mobile-header-landscape {
    height: 48px;
  }
}

/* High DPI displays optimization */
@media (max-width: 768px) and (-webkit-min-device-pixel-ratio: 2) {
  .mobile-crisp-images {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}
